<usermgmt-editor>
  <h2>
    {opts.formstate.username ? 'Edit User' : 'Add User'}
  </h2>
  <div class="form-row">
    <label>Username:</label>
    <input
      type="text"
      name="username",
      readonly={opts.formstate.username}
      value={opts.formstate.username}
      autofocus={!opts.formstate.username}>
    </input>
  </div>
  <div class="form-row">
    <label>Full Name:</label>
    <input
      type="text"
      name="fullname",
      value={opts.formstate.fullname}
      autofocus={opts.formstate.username}>
    </input>
  </div>
  <div class="buttons">
    <button onclick={this.save}>{opts.formstate.username ? 'Save' : 'Add'}</button>
    <button>Cancel</button>
  </div>


  <style scoped>
    :scope > h2 {
      margin-top: 0;
    }
    .form-row {
      display: flex;
      margin-bottom: 4px;
    }
    .form-row label {
      width: 30%;
    }
    .form-row input {
      flex-grow: 1;
    }
    .buttons {
      margin-top: 10px;
    }
  </style>


  <script>
    var state = require('../riotapp.state');

    var tag = this;
    tag.save = function() {
      console.log(tag);
      state.addUser(tag.username.value, tag.fullname.value);
      tag.opts.done();
      tag.update(); // this really shouldn't be necessary - riot bug?
    }
  </script>

</usermgmt-editor>